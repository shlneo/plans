{% extends "base.html" %}
{% block title %}{{ _('Регистрация - ErespondentS') }}{% endblock %}
{% block content %}

<div class="auth-page">
  <div class="auth-text-upper">
    <div class="auth-title" onclick="window.location.href='/login'">
      <img src="/static/img/Logo-black.png" alt="">
      <a>ErespondentS</a>
    </div>
    <p class="auth-subtitle">{{ _(' Система представления планов энергосберегающих <br> мероприятий') }}
    </p>
  </div>

<form class="steps-wrapper" method="POST" action="{{ url_for('auth.param') }}">
    <!-- Шаг 1 -->
    <div class="step auth-step-1 active auth-container">
        <div class="auth-container-title">{{ _('Заполнение личной информации') }}</div>
        <div class="auth-choose" style="justify-content: center;" role="tablist">
            <a class="auth-tab active wave-effect" role="tab" style="width: 100%;" aria-selected="true">
                {{ _('Шаг 1') }}
            </a>
        </div>
        <div class="auth-form" id="form-part-1">
            <div class="row-form-group">
                <div class="form-group">
                    <label>{{ _('Фамилия') }}</label>
                    <input type="text" name="last_name" id="secondname" maxlength="15" placeholder="{{ _('Иванов') }}" class="auth-input" required>
                </div>
                <div class="form-group">
                    <label>{{ _('Имяя') }}</label>
                    <input type="text" name="first_name" id="name" maxlength="15" placeholder="{{ _('Иван') }}" class="auth-input" required>
                </div>
            </div>
            <div class="form-group">
                <label>{{ _('Отчество') }}</label>
                <input type="text" name="patronymic_name" id="patronymic" maxlength="15" placeholder="{{ _('Иванович') }}" class="auth-input">
            </div>
            <div class="form-group">
                <label for="phone">{{ _('Телефон') }}</label>
                <input type="tel" name="phone" id="phone" maxlength="13" placeholder="{{ _('Введите номер телефона') }}" class="auth-input" required>
            </div>
            <div class="form-group">
                <label>{{ _('Должность') }}</label>
                <input type="text" name="post" id="post" maxlength="35" placeholder="{{ _('Инженер-энергетик') }}" class="auth-input">
            </div>   
            <div class="button-auth-area">
                <div></div>
                <button type="button" class="auth-next-button" id="next-btn-1">
                    <span class="btn-text">{{ _('Далее') }}</span>
                    <img src="/static/img/Next.svg" alt="" class="btn-icon">
                </button>
            </div>
        </div>
    </div>

    <!-- Шаг 2: Выбор структуры -->
    <div class="step auth-step-2 auth-container" style="display: none;">
        <div class="auth-container-title">{{ _('Выбор структуры') }}</div>
        <div class="auth-choose" style="justify-content: center;" role="tablist">
            <a class="auth-tab active wave-effect" role="tab" style="width: 100%;" aria-selected="true">
                {{ _('Шаг 2') }}
            </a>
        </div>

        <div class="radio-org-container">
            <label>
                <input type="radio" name="entity_type" value="organization" class="radio-org-input" checked>
                <div class="radio-org-card" data-type="organization">
                    <span class="radio-org-icon"></span>
                    <div class="radio-org-title">Организация</div>
                    <div class="radio-org-subtitle">Компания или учреждение</div>
                </div>
            </label>
            
            <label>
                <input type="radio" name="entity_type" value="ministry" class="radio-org-input">
                <div class="radio-org-card" data-type="ministry">
                    <span class="radio-org-icon"></span>
                    <div class="radio-org-title">Министерство</div>
                    <div class="radio-org-subtitle">Ведомство или орган власти</div>
                </div>
            </label>
            
            <label>
                <input type="radio" name="entity_type" value="region" class="radio-org-input">
                <div class="radio-org-card" data-type="region">
                    <span class="radio-org-icon"></span>
                    <div class="radio-org-title">Регион</div>
                    <div class="radio-org-subtitle">Субъект или территория</div>
                </div>
            </label>
        </div>

        <div class="button-auth-area">
            <button type="button" class="auth-next-button" id="prev-btn-2">
                <img src="/static/img/Back.svg" alt="" class="btn-icon">
                <span class="btn-text">{{ _('Назад') }}</span>
            </button>
            <button type="button" class="auth-next-button" id="next-btn-2">
                <span class="btn-text">{{ _('Далее') }}</span>
                <img src="/static/img/Next.svg" alt="" class="btn-icon">
            </button>
        </div>
    </div>

    <!-- Шаг 3: Выбор конкретной структуры -->
    <div class="step auth-step-3 auth-container" style="display: none;">
        <div class="auth-container-title">{{ _('Выбор конкретной структуры') }}</div>
        <div class="auth-choose" style="justify-content: center;" role="tablist">
            <a class="auth-tab active wave-effect" role="tab" style="width: 100%;" aria-selected="true">
                {{ _('Шаг 3') }}
            </a>
        </div>

        <!-- Блок для организации -->
        <div class="entity-block" id="organization-block">
            <div class="form-group">
                <label>{{ _('Организация') }} *</label>
                <div class="input-with-icon search-container">
                    <img src="/static/img/Search_gray.svg" alt="" class="input-icon">
                    <input type="text" 
                          name="organization_search"
                          data-type="organization" 
                          id="organization-search"
                          placeholder="{{ _('Наименование или ОКПО') }}" 
                          class="search-input app-input" 
                          autocomplete="off">
                    
                    <div class="search-dropdown" id="organization-dropdown" style="display: none;">
                        <div class="search-list" id="organization-list"></div>
                        <div class="search-loading" id="organization-loading" style="display: none;">
                            {{ _('Загрузка...') }}
                        </div>
                        <div class="search-more" id="organization-more" style="display: none;">
                            <button type="button" class="load-more-btn" data-type="organization">{{ _('Загрузить еще') }}</button>
                        </div>
                    </div>
                </div>
                <input type="hidden" name="organization_id" id="organization_id">
            </div>
        </div>

        <!-- Блок для министерства -->
        <div class="entity-block" id="ministry-block" style="display: none;">
            <div class="form-group">
                <label>{{ _('Министерство') }} *</label>
                <div class="input-with-icon search-container">
                    <img src="/static/img/Search_gray.svg" alt="" class="input-icon">
                    <input type="text" 
                          name="ministry_search"
                          data-type="ministry" 
                          id="ministry-search"
                          placeholder="{{ _('Название министерства') }}" 
                          class="search-input app-input" 
                          autocomplete="off">
                    
                    <div class="search-dropdown" id="ministry-dropdown" style="display: none;">
                        <div class="search-list" id="ministry-list"></div>
                        <div class="search-loading" id="ministry-loading" style="display: none;">
                            {{ _('Загрузка...') }}
                        </div>
                        <div class="search-more" id="ministry-more" style="display: none;">
                            <button type="button" class="load-more-btn" data-type="ministry">{{ _('Загрузить еще') }}</button>
                        </div>
                    </div>
                </div>
                <input type="hidden" name="ministry_id" id="ministry_id">
            </div>
        </div>

        <!-- Блок для региона -->
        <div class="entity-block" id="region-block" style="display: none;">
            <div class="form-group">
                <label>{{ _('Регион') }} *</label>
                <div class="input-with-icon search-container">
                    <img src="/static/img/Search_gray.svg" alt="" class="input-icon">
                    <input type="text" 
                          name="region_search"
                          data-type="region" 
                          id="region-search"
                          placeholder="{{ _('Название региона') }}" 
                          class="search-input app-input" 
                          autocomplete="off">
                    
                    <div class="search-dropdown" id="region-dropdown" style="display: none;">
                        <div class="search-list" id="region-list"></div>
                        <div class="search-loading" id="region-loading" style="display: none;">
                            {{ _('Загрузка...') }}
                        </div>
                        <div class="search-more" id="region-more" style="display: none;">
                            <button type="button" class="load-more-btn" data-type="region">{{ _('Загрузить еще') }}</button>
                        </div>
                    </div>
                </div>
                <input type="hidden" name="region_id" id="region_id">
            </div>
        </div>

        <div class="button-auth-area">
            <button type="button" class="auth-next-button" id="prev-btn-3">
                <img src="/static/img/Back.svg" alt="" class="btn-icon">
                <span class="btn-text">{{ _('Назад') }}</span>
            </button>
        </div>
        <div class="button-auth-area">
            <button type="submit" class="auth-button" id="submit-btn" disabled>
                <img src="/static/img/Sign.svg" alt="" class="btn-icon">
                <span class="btn-text">{{ _('Зарегистрироваться') }}</span>
            </button>
        </div>
    </div>
    
    <input type="hidden" name="csrf_token" value="{{ csrf_token() }}">
    <input type="hidden" name="entity_type" id="entity_type" value="organization">
</form>
</div>

{% endblock %}